# Log práce: 2026-02-04

## Provedené změny

### 1. Oprava Production Order 404
- **Soubor**: `src/app/production/[id]/page.tsx`
- **Příčina**: Parametry routy nebyly awaitovány v souladu s Next.js 15/16 standardem.
- **Řešení**: Přidán `await params`.

### 2. Kompletní reimplementace Timeline (V2)
- **Umístění**: `src/components/timeline-new/`
- **Důvod**: Původní verze trpěla extrémním nárůstem DOM elementů (stovky divů pro mřížku) a nespolehlivým načítáním z SQL View.
- **Klíčové featury**:
    - **CSS Grid**: Mřížka vykreslena pomocí `linear-gradient` (výrazně vyšší výkon).
    - **Direct Scroll Sync**: Odstraněn React State ze scrollu, synchronizace probíhá přímo přes DOM referenci.
    - **Hard Data Fetch**: Načítání dat přímo z tabulek `projects`, `production_orders` a `services` (nezávislost na SQL View).
    - **Planning Support**: Zobrazení projektů i bez vyplněných datumů (autofill dnešního data).

### 3. Nové infrastrukturní prvky
- Vytvořena komponenta `Skeleton` pro loading stavy.
- Přidány `loading.tsx` a `error.tsx` pro Timeline a Production detail.

## Verifikace
- Projekt úspěšně sestaven pomocí `npm run build`.
- Timeline vizuálně ověřena na screenshotu (zobrazuje mřížku a hlavičku v češtině).

## Kontext pro příště
Všechny nové úpravy časové osy směřovat do `src/components/timeline-new`. Stará složka `timeline` je momentálně nevyužívaná.
